# Guide

## Setting up
1. Clone the repository: `git clone https://github.com/moortwig/case-study.git`
2. Run `docker run --rm --interactive --tty -v $(pwd):/app composer install`. This will install the vendor packages.
3. Start Sail: `./vendor/bin/sail up -d`
4. Install frontend vendors: `./vendor/bin/sail npm install`
5. Build frontend: `./vendor/bin/sail npm run dev`
6. Copy contents of `.env.example` to `.env`
7. Generate APP_KEY: `./vendor/bin/sail artisan key:generate`
8. In your `.env` file, set the following values:
```	
DB_HOST=127.0.0.1
...
DB_USERNAME=sail
DB_PASSWORD=password
```
9. Run migration to get a database schema: `./vendor/bin/sail artisan migrate`


If necessary, installation guide for Laravel (with links to instruction of setting up Docker) can be found on https://laravel.com/docs/9.x

## Start/stop container
Instructions on Sail: https://laravel.com/docs/9.x/

### Start container
```
./vendor/bin/sail up -d
```

### Stop container
```
./vendor/bin/sail stop
```

## Database
The migration files set up the following tables, which are used by the application:
- `studies`
- `study_groups`
- `study_participants`
```
./vendor/bin/sail artisan migrate
```

## Codebase
Most of the logic lives under `app/Api`.

The form is generated by a Blade template through `\App\Http\Controllers\ScreeningController`.

Common exceptions are stored in `app/Exceptions`, while the context specific ones share directory with their respective contexts (eg `\App\Api\Studies\Requirements\AgeRequirementNotMetException`.

## Using the application

### Accessing
Sorry, I'm not a devops person (so no fancy host name) ;) .

Point your browser to http://localhost/. You should see a heading (`Screening`) and a form.

### Run PHPUnit tests
```
./vendor/bin/sail test
```
